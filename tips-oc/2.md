##内存管理##

1、操作系统内存

    5个区域：栈区、堆区、BSS、数据区、代码区。
    （1）、存放局部变量
    （2）、存放程序运行会随机分配的空间
    （3）、存放全局未初始化的全局变量和静态变量
    （4）、存放已经初始化的全局变量和静态变量和字符串
    （5）、存放代码
    ￼

￼![](/assets/screenshot.png)


2、objective-c内存管理
    
    只管理用new初始化的对象，也就是继承自NSObject的对象。堆中的数据

3、内存管理的原理

    对象的所有权及引用计数。任何对象都可能拥有一个或多个所有者。只要一个对象至少有一个拥有者，它就继续存在。
    可以通过retain获得对象的所有权。但是存在一种特殊情况，比如当对象的值为nil时，引用计数器为0，但是它不释放空间。
    Person *p = nil;此时retainCount为0，且对象为nil但是不回收内存，因为该对象根本没初始化，没有分配空间也就没有办法回收空间。
    
    
    
    
    
    
    
    

3、ARC代码例子

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
Person *person = [[Person alloc] init];
NSLog(@"对象person的retainCount: %zd",[person retainCount] );[person autorelease];
NSLog(@"对象person的retainCount: %zd",[person retainCount] );
NSLog(@"到这里，person还没被释放");
[pool release];
```

